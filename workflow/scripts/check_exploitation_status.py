import json
import sys


def check_exploitation_status(input_file, output_file):
    # Read the input JSON file
    with open(input_file, 'r') as file:
        exploit_reports = json.load(file)

    # Process the exploit reports and create a status report
    status_report = {
        "overall_status": "Exploitation check completed",
        "devices_checked": len(exploit_reports),
        "device_statuses": []
    }

    for report in exploit_reports:
        device_status = {
            "ip_address": report["ip_address"],
            "operating_system": report["operating_system"],
            "vulnerabilities_exploited": len(report["exploit_simulation_results"])
        }
        status_report["device_statuses"].append(device_status)

    # Write the status report to the output JSON file
    with open(output_file, 'w') as file:
        json.dump(status_report, file, indent=4)
